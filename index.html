<!doctype html>
<head>
    <title>BitSplit</title>
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <link href="./css/custom.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Montserrat:700,400">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="./js/frontend.js" language="javascript" type="text/javascript"></script>
    <script src="./js/bootstrap.min.js" language="javascript" type="text/javascript"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.3.1.min.js"></script>
    <script type="text/javascript" src="./js/userlib.js"></script>

</head>


<body>
    <div id = "current_user" class="current_user"></div>
    <script type="text/javascript">
    $(document).ready(function() {
      //alert(getCurrentUser());
      //$.("#current_user").append(getCurrentUser());
      $('#current_user').append("Currently logged in as: " + getCurrentUser().fullName);
    });
    Parse.initialize("is3SIL9nDLCqIhhOp3S9v1f8K7PiXs9mTjRwDkPs", "mwwZOPMNh8vgZFTqfr6koLzbU8DtT5xhydECDiDv");

    </script>
    <div class="container">
        <h1>BitSplit</h1>
        <p> Manage your tab and resolve payments like a champ </p>
        <form class="form-inline">

        <!-- Small modal -->
        <button type="button" class="btn btn-default" data-toggle="modal" data-target="#modal1">Create Account</button>

        <div id= "modal1" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-sm">
            <div class="modal-content">
              <input id = "newname" type="text" name="name" class="form-control" placeholder="Full name"/>
              <input id = "newemail" type="text" name="email" class="form-control" placeholder="email address"/>
              <input id = "newpassword" type="password" name="password" class="form-control" placeholder="password"/>
              <input id = "newpubkey" type="text" name="pubkey" class="form-control" placeholder="public bitcoin wallet key"/>
              <input id = "create_new" type = "submit" name="Create" class="btn btn-default" value="Create"/>
            </div>
          </div>
        </div>

        <!-- Small modal -->
        <button type="button" class="btn btn-default" data-toggle="modal" data-target="#modal2">Login</button>

        <div id = "modal2" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-sm">
            <div class="modal-content">
              <input type="text" name="email" class="form-control" placeholder="email"/>
              <input type="password" name="password" class="form-control" placeholder="password"/>
              <input type = "login_new" name="loginbutton" class="btn btn-default" value="Login"/>
            </div>
          </div>
          </div>
        <script>
        $('#create_new').click(function(event) {
          var user = {
            fullName: document.getElementById('newname').value,
            publicKey: document.getElementById('newpubkey').value,
            email: document.getElementById('newemail').value,
            password: document.getElementById('newpassword').value
          };


          createAccount(user,function(err,user){
            console.log(err);
            console.log(user);
          });
          event.preventDefault();
        });

        $('#login_new').click(function(event) {
          var username = document.getElementById('email').value;
          var password = document.getElementById('password').value;
          login(username,password,function(err,user){
            console.log(err);
            console.log(user);
          });
          event.preventDefault();
        });

        </script>

                </form>
                </a>
            </div>
        </body>
        </div>
